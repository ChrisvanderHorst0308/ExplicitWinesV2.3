!function(s){"use strict";s(document).ready(function(){var t,e,i,r,o,a;t=s(".woocommerce-product-search"),e=s(".ajax-search .woocommerce-product-search .search-field"),i=s(".ajax-search-result"),r=wp.template("ajax-live-search-template"),o=s(".input-dropdown-inner"),a=s("> .list-wrapper",o),s("body").on("click",function(){i.hide(),a.slideUp(100),o.removeClass("dd-shown")}),s(".input-dropdown-inner > a").on("click",function(e){return e.preventDefault(),o.hasClass("dd-shown")?(o.removeClass("dd-shown"),a.slideUp(100)):(o.addClass("dd-shown"),a.slideDown(100)),i.hide(),!1}),s(".input-dropdown-inner > .list-wrapper").on("click","a",function(e){e.preventDefault();var n=s(this).data("val"),t=s(this).text();s(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),s(this).parent().addClass("current-item"),0!=n?a.find("ul:not(.children) > li:first-child").show():0==n&&a.find("ul:not(.children) > li:first-child").hide(),s(".input-dropdown-inner > a span").text(t),s(".input-dropdown-inner > select").val(n).trigger("cat_selected"),a.slideUp(100),o.removeClass("dd-shown")}),s(".input-dropdown-inner > select").change(function(){var e=s(this).val(),n=s(this).find("option:selected").text();s(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),s(this).parent().addClass("current-item"),0!=e?a.find("ul:not(.children) > li:first-child").show():0==e&&a.find("ul:not(.children) > li:first-child").hide(),s(".input-dropdown-inner > a span").text(n)}),e.length&&e.keyup(function(){if(2<this.value.length){var e=s('select[name="product_cat"]',t).val();s.ajax({url:bodoniAjax.ajaxurl,type:"post",data:{action:"bodoni_ajax_search_products",query:this.value,product_cat:e},beforeSend:function(){t.addClass("loading")},success:function(e){t.removeClass("loading");var n=s.parseJSON(e);i.empty(),i.show(),s.each(n,function(e,n){i.append(r({url:n.url,title:n.value,img:n.img,price:n.price}))})}})}else i.hide()}).on("click",function(e){e.stopPropagation()}).on("focus",function(e){a.slideUp(100),o.removeClass("dd-shown"),2<this.value.length&&i.show()})})}(jQuery);